webpackJsonp([0,3],{186:function(t,e,n){"use strict";var o=n(0);n.d(e,"a",function(){return r});var i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=function(){function t(){this.srcPhotos=["http://www.rogueamoeba.com/global/images/icons/96/freebies@2x.png"]}return t.prototype.addToList=function(t){this.srcPhotos.unshift(t)},t.prototype.getList=function(){return this.srcPhotos},t=i([n.i(o.b)(),a("design:paramtypes",[])],t)}()},288:function(t,e,n){"use strict";var o=n(0);n.d(e,"a",function(){return r});var i=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},r=function(){function t(){}return t=i([n.i(o.G)({selector:"pb-root",template:n(589),styles:[n(586)]}),a("design:paramtypes",[])],t)}()},329:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=329},330:function(t,e,n){"use strict";var o=n(434),i=(n.n(o),n(411)),a=n(0),r=n(433),s=n(431);r.a.production&&n.i(a._29)(),n.i(i.a)().bootstrapModule(s.a)},429:function(t,e,n){"use strict";var o=n(179),i=n(0),a=n(403),r=n(408),s=n(288),c=n(430),f=n(186),p=n(432);n.d(e,"a",function(){return u});var l=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(){}return t=l([n.i(i.I)({declarations:[s.a,c.a,p.a],imports:[o.b,a.a,r.a],providers:[f.a],bootstrap:[s.a]}),d("design:paramtypes",[])],t)}()},430:function(t,e,n){"use strict";var o=n(0),i=n(186);n.d(e,"a",function(){return s});var a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t,e){this.renderer=t,this.photoService=e,this.takePicInProgress=!1,this.preview=!1,this.counter=0,this.flashState="flashOff"}return t.prototype.ngAfterViewInit=function(){var t=this;console.log("ngAfterViewInit"),this.getMedia(),this.renderer.listenGlobal("body","click",function(){t.takePictureAfterCountdown()}),this.renderer.listenGlobal("body","keypress",function(){t.takePictureAfterCountdown()})},t.prototype.getMedia=function(){var t=this;navigator.getUserMedia({video:!0,audio:!1},function(e){var n=window.URL;t.video.nativeElement.setAttribute("src",n.createObjectURL(e)),t.video.nativeElement.play()},function(t){console.log("An error occured! "+t)})},t.prototype.startTimer=function(t){var e=this;this.counter=3,this.beep.nativeElement.play();var n=setInterval(function(){e.counter--,e.counter>0&&e.beep.nativeElement.play(),0===e.counter&&(clearInterval(n),t())},1e3)},t.prototype.flashStateDone=function(t){var e=this;"flashOn"===t.toState&&(this.flash.nativeElement.play(),setTimeout(function(){e.takePicture(),e.flashState="flashOff"},300))},t.prototype.takePicture=function(){var t=this;console.log("takePic");var e=this.canvas.nativeElement,n=this.video.nativeElement,o=this.img.nativeElement;e.width=n.videoWidth,e.height=n.videoHeight;var i=e.getContext("2d");i.translate(e.width,0),i.scale(-1,1),i.drawImage(n,0,0,n.videoWidth,n.videoHeight);var a=this.canvas.nativeElement.toDataURL("image/png");o.setAttribute("src",a),o.style.display="",o.style.display="none",this.photoService.addToList(a),this.preview=!0,this.takePicInProgress=!1,setTimeout(function(){t.preview=!1},5e3)},t.prototype.takePictureAfterCountdown=function(){var t=this;this.takePicInProgress||(this.takePicInProgress=!0,this.preview=!1,console.log("takePictureAfterCountdown"),this.startTimer(function(){t.flashState="flashOn"}))},a([n.i(o._23)("video"),r("design:type","function"==typeof(e="undefined"!=typeof o.g&&o.g)&&e||Object)],t.prototype,"video",void 0),a([n.i(o._23)("img"),r("design:type","function"==typeof(s="undefined"!=typeof o.g&&o.g)&&s||Object)],t.prototype,"img",void 0),a([n.i(o._23)("canvas"),r("design:type","function"==typeof(c="undefined"!=typeof o.g&&o.g)&&c||Object)],t.prototype,"canvas",void 0),a([n.i(o._23)("beep"),r("design:type","function"==typeof(f="undefined"!=typeof o.g&&o.g)&&f||Object)],t.prototype,"beep",void 0),a([n.i(o._23)("flash"),r("design:type","function"==typeof(p="undefined"!=typeof o.g&&o.g)&&p||Object)],t.prototype,"flash",void 0),t=a([n.i(o.G)({selector:"pb-camera",template:n(590),styles:[n(587)],animations:[n.i(o._24)("flashState",[n.i(o._25)("flashOff",n.i(o._26)({display:"none",opacity:0})),n.i(o._25)("flashOn",n.i(o._26)({display:"",opacity:1})),n.i(o._27)("flashOn => flashOff",[n.i(o._26)({opacity:1}),n.i(o._28)("200ms")]),n.i(o._27)("* => flashOn",[n.i(o._26)({opacity:1}),n.i(o._28)("0ms")])])]}),r("design:paramtypes",["function"==typeof(l="undefined"!=typeof o.r&&o.r)&&l||Object,"function"==typeof(d="undefined"!=typeof i.a&&i.a)&&d||Object])],t);var e,s,c,f,p,l,d}()},431:function(t,e,n){"use strict";var o=(n(288),n(429));n.d(e,"a",function(){return o.a})},432:function(t,e,n){"use strict";var o=n(0),i=n(186);n.d(e,"a",function(){return s});var a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t){this.photoService=t,this.photos=[],this.photos=this.photoService.getList()}return t.prototype.ngOnInit=function(){},t=a([n.i(o.G)({selector:"pb-photo-list",template:n(591),styles:[n(588)]}),r("design:paramtypes",["function"==typeof(e="undefined"!=typeof i.a&&i.a)&&e||Object])],t);var e}()},433:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={production:!0}},434:function(t,e,n){"use strict";var o=n(448),i=(n.n(o),n(441)),a=(n.n(i),n(437)),r=(n.n(a),n(443)),s=(n.n(r),n(442)),c=(n.n(s),n(440)),f=(n.n(c),n(439)),p=(n.n(f),n(447)),l=(n.n(p),n(436)),d=(n.n(l),n(435)),u=(n.n(d),n(445)),h=(n.n(u),n(438)),y=(n.n(h),n(446)),v=(n.n(y),n(444)),g=(n.n(v),n(449)),b=(n.n(g),n(604));n.n(b)},586:function(t,e){t.exports=".container{\n  display:flex;\n  height:100%;\n  flex-direction:row;\n  justify-content:space-between; }\n  .container pb-camera{\n    flex-grow:2;\n    height:100%;\n    width:auto; }\n  .container pb-photo-list{\n    flex-grow:1;\n    width:250px;\n    height:100vh;\n    overflow-y:scroll; }\n"},587:function(t,e){t.exports=".flash{\n  width:100%;\n  height:100%;\n  position:fixed;\n  z-index:99999;\n  background:white; }\n\n.container{\n  position:relative;\n  padding:40px; }\n  .container video{\n    width:100%;\n    z-index:-100;\n    transform:rotateY(180deg); }\n  .container img{\n    width:100%; }\n  .container .timer{\n    color:white;\n    font-size:10em;\n    position:absolute;\n    top:50%;\n    left:50%;\n    transform:translate(-50%, -50%); }\n"},588:function(t,e){t.exports="ul{\n  margin:0;\n  padding:0;\n  padding-top:30px;\n  min-height:400px;\n  width:270px; }\n\nul li{\n  margin-left:20px; }\n\nimg{\n  width:200px; }\n\n*{\n  -moz-box-sizing:border-box;\n  -webkit-box-sizing:border-box;\n  box-sizing:border-box; }\n\n@keyframes fade-in{\n  0%{\n    opacity:0; }\n  100%{\n    opacity:1; } }\n\n.polaroid{\n  width:220px;\n  height:240px;\n  position:relative;\n  float:left;\n  background:#1e1c18;\n  border:7px solid #f5f5f5;\n  border-bottom:50px solid #f5f5f5;\n  box-shadow:0 0 6px -1px #000;\n  overflow:hidden;\n  left:0px;\n  -webkit-transform:rotate(10deg);\n  -moz-transform:rotate(10deg);\n  clear:both; }\n\n.polaroid img{\n  width:100%;\n  animation:fade-in 8s ease-in;\n  animation-iteration-count:1; }\n"},589:function(t,e){t.exports='<div class="container">\n  <pb-camera></pb-camera>\n  <pb-photo-list></pb-photo-list>\n</div>\n'},590:function(t,e){t.exports='<div class="flash"\n     (@flashState.done)="flashStateDone($event)"\n     [@flashState]="flashState">\n\n</div>\n<div class="container">\n  <video #video [ngStyle]="{display:preview ? \'none\':\'\'}" class="video"></video>\n  <img #img [ngStyle]="{display:!preview ? \'none\':\'\'}" class="photo">\n  <canvas #canvas style="display: none;"></canvas>\n  <p class="timer" #timer [ngStyle]="{display:counter === 0 ? \'none\':\'\'}">{{counter}}</p>\n</div>\n<audio #beep class="beep" src="assets/sounds/countdown.mp3"></audio>\n<audio #flash class="flash" src="assets/sounds/flash.mp3"></audio>\n'},591:function(t,e){t.exports='<h1>Photos ({{photos.length}})</h1>\n<ul class="wrapper">\n  <li *ngFor="let photo of photos" class="polaroid">\n    <img [src]="photo" alt="">\n  </li>\n</ul>\n'},605:function(t,e,n){t.exports=n(330)}},[605]);
//# sourceMappingURL=main.2047af75de8af7d0a7d6.bundle.map